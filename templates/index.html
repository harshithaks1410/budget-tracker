<!DOCTYPE html>
<html>
<head>
    <title>ðŸ’° Budget Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>ðŸ’° Budget Tracker</h1>
        <h2>Balance: â‚¹{{ balance }}</h2>

        <div style="margin: 30px auto; max-width: 500px;">
            <h3 style="text-align:center;">ðŸ“ˆ Income vs Expense</h3>
            <canvas id="lineChart" width="400" height="200"></canvas>
        </div>

        <div class="section">
            <h3>Income</h3>
            <ul>
                {% for entry in data.income %}
                    <li>{{ entry.source }}: â‚¹{{ entry.amount }}</li>
                {% endfor %}
            </ul>
            <form action="/add_income" method="POST">
                <input type="text" name="source" placeholder="Source" required>
                <input type="number" name="amount" placeholder="Amount" required>
                <button type="submit">âž• Add Income</button>
            </form>
        </div>

        <div class="section">
            <h3>Expenses</h3>
            <ul>
                {% for entry in data.expense %}
                    <li>{{ entry.reason }}: â‚¹{{ entry.amount }}</li>
                {% endfor %}
            </ul>
            <form action="/add_expense" method="POST">
                <input type="text" name="reason" placeholder="Reason" required>
                <input type="number" name="amount" placeholder="Amount" required>
                <button type="submit">âž– Add Expense</button>
            </form>
        </div>
    </div>

<script>
    const income = {{ total_income | tojson }};
    const expense = {{ total_expense | tojson }};

    const ctx = document.getElementById('lineChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Income', 'Expense'],
            datasets: [{
                label: 'â‚¹ Amount',
                data: [income, expense],
                borderColor: 'rgba(75, 192, 192, 1)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                fill: true,
                tension: 0.4,
                pointBackgroundColor: 'rgba(75, 192, 192, 1)',
                pointRadius: 5
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Your Financial Summary'
                }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>

</body>
</html>
